<div [formGroup]="triggerForm" class="trigger">
  <mat-form-field appearance="outline" class="compact-field trigger-select">
    <mat-select (selectionChange)="onTriggerChange()" formControlName="id" placeholder="Select trigger...">
      @for (trigger of triggers; track trigger.id) {
        <mat-option [value]="trigger.id">{{ trigger.display }}</mat-option>
      }
    </mat-select>
  </mat-form-field>
  <div class="parameters" formArrayName="parameters">
    @for (paramCtrl of parametersArray.controls; track paramCtrl.value.id; let i = $index) {
      <div class="param-row">
        <app-parameter class="flex-grow-1"
                       [parameterForm]="convertToFormGroup(paramCtrl)"
                       [availableParameters]="parameters[i]"
                       (parameterChange)="updateParameters()"
        ></app-parameter>
        <button (click)="removeParameter(i)" class="remove-param-btn" title="Remove">
          <mat-icon>close</mat-icon>
        </button>
      </div>
    }
  </div>
  <button (click)="addParameter()" class="add-param-btn">+ Param</button>
</div>
