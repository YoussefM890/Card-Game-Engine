<div [formGroup]="actionForm" class="action">
  <mat-form-field appearance="fill" class="w-100">
    <mat-label>Action</mat-label>
    <mat-select (selectionChange)="updateActionParameters()" formControlName="id">
      @for (action of actions; track action.id) {
        <mat-option [value]="action.id">{{ action.display }}</mat-option>
      }
    </mat-select>
  </mat-form-field>
  <div formArrayName="parameters">
    @for (paramCtrl of parameters.controls; track paramCtrl.value.id; let k = $index) {
      <div class="d-flex">
        <app-parameter class="flex-grow-1"
                       [parameterForm]="convertToFormGroup(paramCtrl)"
                       [availableParameters]="updateActionParameters()"
        ></app-parameter>
        <button mat-icon-button color="warn" (click)="removeParameter(k)" class="col-1">
          <mat-icon>remove_circle_outline</mat-icon>
        </button>
      </div>
    }
  </div>
  <button mat-button (click)="addParameter()">Add Parameter</button>
</div>
